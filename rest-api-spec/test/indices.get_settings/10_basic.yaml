---
setup:
  - do:
      indices.create:
        index: test-index
        body:
          settings:
            index:
              refresh_interval: -1
              number_of_shards: 2
              number_of_replicas: 3

  - do:
      indices.create:
        index: test-index-2
        body:
          settings:
            index:
              refresh_interval: 10m
              number_of_shards: 5
              number_of_replicas: 1

---
"Test get indices settings":
  
  - do:
      indices.get_settings:
        index: test-index

  - match: { test-index.settings.index.number_of_replicas: "3" }
  - match: { test-index.settings.index.number_of_shards: "2" }
  - match: { test-index.settings.index.refresh_interval: "-1" }
  - is_false: test-index-2.settings.index.number_of_replicas
  - is_false: test-index-2.settings.index.number_of_shards
  - is_false: test-index-2.settings.index.refresh_interval

---
"Test get indices settings using '_all'":

  - do:
      indices.get_settings:
        index: _all
        name: index.number*

  - match: { test-index.settings.index.number_of_replicas: "3" }
  - match: { test-index.settings.index.number_of_shards: "2" }
  - is_false: test-index.settings.index.refresh_interval
  - match: { test-index-2.settings.index.number_of_replicas: "1" }
  - match: { test-index-2.settings.index.number_of_shards: "5" }
  - is_false: test-index-2.settings.index.refresh_interval

---
"Test get indices settings using '*'":

  - do:
      indices.get_settings:
        index: '*'
        name: '*'

  - match: { test-index.settings.index.number_of_replicas: "3" }
  - match: { test-index.settings.index.number_of_shards: "2" }
  - match: { test-index.settings.index.refresh_interval: "-1" }
  - match: { test-index-2.settings.index.number_of_replicas: "1" }
  - match: { test-index-2.settings.index.number_of_shards: "5" }
  - match: { test-index-2.settings.index.refresh_interval: "10m" }

---
"Test get indices settings using prefixes":

  - do:
      indices.get_settings:
        index: 'test-*'
        name: 'index.refr*'

  - is_false: test-index.settings.index.number_of_replicas
  - is_false: test-index.settings.index.number_of_shards
  - match: { test-index.settings.index.refresh_interval: "-1" }
  - is_false: test-index-2.settings.index.number_of_replicas
  - is_false: test-index-2.settings.index.number_of_shards
  - match: { test-index-2.settings.index.refresh_interval: "10m" }

---
"Test get indices settings using comma separated names":

  - do:
      indices.get_settings:
        index: 'test-index,test-index-2'
        name: 'index.number_of_replicas,index.refresh_interval'

  - match: { test-index.settings.index.number_of_replicas: "3" }
  - is_false: test-index.settings.index.number_of_shards
  - match: { test-index.settings.index.refresh_interval: "-1" }
  - match: { test-index-2.settings.index.number_of_replicas: "1" }
  - is_false: test-index-2.settings.index.number_of_shards
  - match: { test-index-2.settings.index.refresh_interval: "10m" }

